<div class="register-container">
  <mat-card appearance="outlined" class="form">
    <mat-card-content>
      <h1 class="title">Crear Perfil</h1>
      <mat-card-subtitle>Ingresa tus datos personales</mat-card-subtitle>

      <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="user-input">
        <div class="fields">
          <label class="labels" for="name">Nombre</label>
          <mat-form-field appearance="outline">
            <input id="name" class="input" matInput placeholder="Jhon" formControlName="name" required>
            <mat-error *ngIf="profileForm.get('name')?.hasError('required') && profileForm.get('name')?.touched" class="error">
              El nombre es obligatorio
            </mat-error>
            <mat-error *ngIf="profileForm.get('name')?.hasError('pattern') && profileForm.get('name')?.touched" class="error">
              Nombre inv치lido
            </mat-error>
          </mat-form-field>
        </div>

        <div class="fields">
          <label class="labels" for="lastName">Apellido</label>
          <mat-form-field appearance="outline">
            <input class="input" id="lastName" matInput placeholder="Doe" formControlName="lastName" required>
            <mat-error *ngIf="profileForm.get('lastName')?.hasError('required') && profileForm.get('lastName')?.touched" class="error">
              El apellido es obligatorio
            </mat-error>
            <mat-error *ngIf="profileForm.get('lastName')?.hasError('pattern') && profileForm.get('lastName')?.touched" class="error">
              Apellido inv치lido
            </mat-error>
          </mat-form-field>
        </div>

        <div class="fields">
          <label class="labels" for="adress">Direcci칩n</label>
          <mat-form-field appearance="outline">
            <input class="input" id="adress" matInput placeholder="Alameda Los Cedros" formControlName="adress" required>
            <mat-error *ngIf="profileForm.get('adress')?.hasError('required') && profileForm.get('adress')?.touched" class="error">
              La direcci칩n es obligatoria
            </mat-error>
          </mat-form-field>
        </div>

        <div class="fields">
          <label class="labels">N칰mero de celular</label>
          <div class="phone-row">
            <mat-form-field appearance="outline" class="code">
              <input class="input" matInput placeholder="+51" formControlName="countryCode" required>
            </mat-form-field>
            <mat-form-field appearance="outline" class="number">
              <input class="input" matInput placeholder="123-456-789" formControlName="phoneNumber" required>
            </mat-form-field>
          </div>

          <!-- 游댷 Mueve el error justo aqu칤, dentro de "fields", no fuera -->
          <mat-error *ngIf="(profileForm.get('countryCode')?.touched || profileForm.get('phoneNumber')?.touched) &&
                    (profileForm.get('countryCode')?.invalid || profileForm.get('phoneNumber')?.invalid)"
                     class="error">
            Ambos campos son obligatorios y deben ser v치lidos.
          </mat-error>
        </div>



        <button mat-button class="log-in" type="submit">Guardar Datos De Perfil</button>
      </form>


      <mat-error *ngIf="errorMessage" style="display: block; margin-top: 8px;">
        {{ errorMessage }}
      </mat-error>
      <div *ngIf="successMessage" style="color: green; margin-top: 8px;">
        {{ successMessage }}
      </div>

    </mat-card-content>
  </mat-card>
</div>
